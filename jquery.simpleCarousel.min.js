/**
* $.fn.simpleCarousel
*
* A jQuery plugin to create unstyled bare bone carousels with just the essential functionality available.
*
* @version v1.0.2, 2015-06-05
* @author Fredi Quirino <fred@firefallpro.com>
*/
(function(g){var k={debug:!1,debug_lvl:1,plugin_name:"simpleCarousel",data_prefix:"carousel",class_prefix:"carousel",animation:"default",animation_direction:"horizontal",animations:{},initial_position:!1,speed:1,dot_pagination:!0,delay_dot_pagination:!1,delay_dot_pagination_limit:4E3,update_dot_pagination:!0,loop:!1},l=0,d={_log:function(){if(g.fn.simpleCarousel.debug){var a=!g.support.opacity,c=arguments,b="";a&&"string"===typeof arguments[0]&&"string"===typeof arguments[1]?b=arguments[0]+" "+arguments[1]:
a&&"string"===typeof arguments[0]&&(b=arguments[0]);console.log(k.plugin_name,a?b:c)}},init:function(a,c,b){b.debug&&(g.fn.simpleCarousel.debug=!0);var e=g.extend({},k,b),f=this;this.each(function(){var c=g(this);if("undefined"!==typeof c.data("carousel")){d._log("init: already initialized");var h=c.data("carousel");h.options=g.extend({},h.options,b);"undefined"!==typeof d[a]&&(f=d[a].call(c,h));return c}d.create_carousel.call(c,e)});return f},create_carousel:function(a){d._log("create_carousel");
var c=this,b={carousel:{current_i:0,transition:!1,length:0},options:a},e=c.find(".carousel_wrapper"),f=e.find(".carousel_slide");a=c.find(".carousel_pagination");var n=g(window);if(!e.length)return d._log("create_carousel: wrapper not found"),c;if(!f.length)return d._log("create_carousel: slides not found"),c;b.carousel.length=f.length;b.carousel.slides=f;f.filter(".active").length||f.eq(0).addClass("active");d._log("create_carousel: checking .carousel for any data attributes:");g.each(b.options,
function(a,e){if("plugin_name"===a||"animations"===a)return!0;"undefined"!==typeof c.data(b.options.data_prefix+"-"+a)&&typeof c.data(b.options.data_prefix+"-"+a)===typeof b.options[a]&&(d._log("create_carousel: over-ride: "+a),b.options[a]=e)});c.addClass("animation-"+b.options.animation);"function"===typeof b.options.initial_position?b.options.initial_position(f):TweenMax.set(f.not(".active"),{xPercent:100});b.options.dot_pagination&&a.length&&!a.find(".dot").length?(d._log("create_carousel: pagination element already exists but not compatible"),
b.options.dot_pagination=!1):b.options.dot_pagination&&a.length&&1<a.find(".dot").length?(a.find(".dot").first().addClass("active"),a.addClass("enable"),c.trigger("pagination_enabled")):b.options.dot_pagination&&d.build_pagination.call(this,b);n.on("resize",function(){b.options.dot_pagination&&b.options.update_dot_pagination&&d.update_layout.call(c,b);var a=parseInt(f.filter(".active").height(),10),a=isNaN(a)?0:a;1<b.options.debug_lvl&&d._log("resize: carousel height:",a);0<a&&e.height(a)}).trigger("resize");
if(g.fn.simpleCarousel.old_jquery)c.delegate(".carousel_pagination .dot","click",function(a){a.preventDefault();d.goto_dot.call(c,b,g(this))});else c.on("click",".carousel_pagination .dot",function(a){a.preventDefault();d.goto_dot.call(c,b,g(this))});l++;c.data("carousel",b)},next:function(a){d._log("next");var c=a.carousel.current_i;c++;var b={};if(a.carousel.transition||!a.options.loop&&c>a.carousel.length-1)return this;a.options.loop&&c>a.carousel.length-1&&(c=0,b.dir=-1);d.transition.call(this,
a,c,b);return this},previous:function(a){d._log("previous",a);var c=a.carousel.current_i;c--;var b={};if(a.carousel.transition||!a.options.loop&&0>c)return this;a.options.loop&&0>c&&(c=a.carousel.length-1,b.dir=1);d.transition.call(this,a,c,b);return this},goto_dot:function(a,c){d._log("goto_dot");if(!c||!c.length)return d._log("goto_dot: dot not found"),this;if(c.hasClass("active"))return d._log("goto_dot: dot already active"),this;c.addClass("active").siblings().removeClass("active");d.transition.call(this,
a,c.index());return this},transition:function(a,c,b){d._log("transition:",c);b=b||{};if(0>c||c===a.carousel.current_i||c>a.carousel.length)return d._log("transition: no change"),this;if(a.carousel.transition)return d._log("transition: unavailable"),this;b="undefined"===typeof b.dir?c<a.carousel.current_i?1:-1:b.dir;a.carousel.transition=!0;var e=a.carousel.slides,f=e.eq(c);if(!f.length)return d._log("transition: no target found"),a.carousel.transition=!1,this;var g=e.eq(a.carousel.current_i);if(!g.length)return d._log("transition: no previous target found"),
a.carousel.transition=!1,this;var h=a.options.animation_direction,k=d.animations[h],h="undefined"!==typeof a.options.animations[h]?a.options.animations[h]:!1,m=a.options.animation;if("undefined"===typeof k[m]&&(!h||"undefined"===typeof h[m]))return d._log("transition: no animation found"),a.carousel.transition=!1,this;g.trigger("before_animation","hide");f.trigger("before_animation","show");var l=this;("undefined"!==typeof k[m]?k:h)[a.options.animation](f,g,{dir:b,speed:a.options.speed},function(){a.carousel.transition=
!1;a.carousel.current_i=c;e.removeClass("active").eq(a.carousel.current_i).addClass("active");g.trigger("animation_complete","hide");f.trigger("animation_complete","show");a.options.dot_pagination&&l.find(".carousel_pagination .dot").removeClass("active").eq(c).addClass("active")});return this},update_layout:function(a){1<a.options.debug_lvl&&d._log("update_layout");var c=this.find(".carousel_pagination"),b=c.find(".dot");if(!b.length)return 1<a.options.debug_lvl&&d._log("update_layout: dots not found"),
this;var e=parseInt(b.css("margin-right"),10),e=isNaN(e)?0:e,f=b.innerWidth(),b=b.length*(f+e)-e,g=this.width(),h=(g-b)/2;1<a.options.debug_lvl&&d._log("update_layout: margin",e,"dot w",f,"pagination w",b,"carousel w",g);b>f&&c.css("left",h);return this},build_pagination:function(a){d._log("build_pagination");var c=this,b,e=g(document.createElement("div")).addClass("carousel_pagination");b=g(document.createElement("ul"));var f=g(document.createElement("li")).addClass("dot"),k=g(document.createElement("a")).attr({href:"#",
title:"dot"}).text("dot");b.append(f.append(k));for(k=0;k<a.carousel.length-1;k++)b.append(f.clone());c.append(e.append(b));b=e.find(".dot");b.first().addClass("active");var h=a.carousel.slides.filter(".active").find("img");if(1<b.length&&a.options.delay_dot_pagination&&h.length){d._log("build_pagination: will delay display of dot pagination");var l=setTimeout(function(){d._log("build_pagination: delay limit reached");h.trigger("load");e.addClass("delay-limit")},a.options.delay_dot_pagination_limit);
h.one("load",function(){d._log("build_pagination: image has loaded");clearTimeout(l);e.addClass("enable");c.trigger("pagination_enabled")})}else 1<b.length&&(e.addClass("enable"),c.trigger("pagination_enabled"))},isLast:function(a){return a.carousel.current_i===a.carousel.length-1},isFirst:function(a){return 0===a.carousel.current_i},animations:{horizontal:{"default":function(a,c,b,e){var f=b.dir||-1;TweenMax.to(c,b.speed,{xPercent:100*f});TweenMax.set(a,{xPercent:-100*f});TweenMax.to(a,b.speed,{xPercent:0,
onComplete:function(){d._log("transition: complete");"undefined"!==typeof e&&e()}})}}}};g.fn.simpleCarousel=function(){for(var a="init",c,b={},e=0;e<arguments.length;e++)switch(typeof arguments[e]){case "function":break;case "object":b=arguments[e];break;case "undefined":break;default:d[arguments[e]]?a=arguments[e]:c=arguments[e]}d._log(a);for(var f in b)b.hasOwnProperty(f)&&typeof b[f]!==typeof k[f]&&null!==k[f]&&(b[f]=k[f]);return d.init.call(this,a,c,b)};g.fn.simpleCarousel.debug=!1;g.fn.simpleCarousel.old_jquery=
!1;"undefined"===typeof g.fn.on&&(g.fn.on=g.fn.bind,g.fn.simpleCarousel.old_jquery=!0)})(jQuery);